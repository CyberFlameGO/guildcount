import{t as e,c as t,o as n,i as o,a as i,b as c,S as r,s,r as a}from"./vendor.9c3661b0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const l=e('<main class="container flex flex-col items-center flex-grow min-w-full m-0 place-content-center"><img id="avatar" class="mb-8 rounded-full"><h3 class="text-3xl" id="user">Hello <!>#</h3><h5 class="text-xl">You are in <b id="count"></b> guilds</h5></main>'),d=e('<div class="flex flex-col min-h-screen font-sans text-white bg-blurple dark:bg-notQuiteBlack"><footer class="container flex flex-row items-center justify-center h-12 min-w-full m-0 space-x-4 text-white bg-notQuiteBlack dark:bg-blurple place-content-center"><a href="privacy-policy"> Privacy Policy </a><a href="https://github.com/ItsRauf/guildcount/"> Github Repo </a></footer></div>'),u=e('<main class="container flex flex-col items-center flex-grow min-w-full m-0 place-content-center"><h3 class="text-3xl"></h3></main>');async function h(e=0,t){const n=await fetch(`https://discord.com/api/v9/users/@me/guilds?after=${e}`,{method:"GET",mode:"cors",cache:"no-cache",headers:{Authorization:t}}),o=await n.json();return 100===o.length&&o.concat(await h(o[99].id,t)),o}const f=()=>{const[e,a]=t({}),[f,m]=t(!1),[p,g]=t("");return n((async()=>{if(0===window.location.hash.length)window.location.replace(`https://discord.com/oauth2/authorize?client_id=447809656652562433&redirect_uri=${encodeURIComponent("https:/itsrauf.github.io/guildcount/")}&response_type=token&scope=guilds%20identify&prompt=none`);else{const e=window.location.hash.substr(1).split("&").reduce(((e,t)=>{const n=t.split("=");return e[n[0]]=n[1],e}),{});history.pushState("",document.title,window.location.pathname+window.location.search),g("Fetching User...");const t=await async function(e){const t=await fetch("https://discord.com/api/v9/users/@me",{method:"GET",mode:"cors",cache:"no-cache",headers:{Authorization:e}});return await t.json()}(`${e.token_type} ${e.access_token}`);g("Fetching Servers...");const n=await h(0,`${e.token_type} ${e.access_token}`);t.guildcount=n.length,a(t),m(!0)}})),(()=>{const t=d.cloneNode(!0),n=t.firstChild;return o(t,i(r,{get when(){return f()},get fallback(){return(()=>{const e=u.cloneNode(!0),t=e.firstChild;return o(t,p),e})()},get children(){const t=l.cloneNode(!0),n=t.firstChild,i=n.nextSibling,r=i.firstChild.nextSibling;r.nextSibling;const a=i.nextSibling.firstChild.nextSibling;return o(i,(()=>e().username),r),o(i,(()=>e().discriminator),null),o(a,(()=>e().guildcount)),c((()=>s(n,"src",`https://cdn.discordapp.com/avatars/${e().id}/${e().avatar}?size=256`))),t}}),n),t})()};a((()=>i(f,{})),document.getElementById("root"));
